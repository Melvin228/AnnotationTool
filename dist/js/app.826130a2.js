(function(e){function t(t){for(var i,s,r=t[0],c=t[1],l=t[2],A=0,d=[];A<r.length;A++)s=r[A],n[s]&&d.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],i=!0,r=1;r<a.length;r++){var c=a[r];0!==n[c]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},n={app:0},o=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("c21b"),n=a.n(i);n.a},"05ce":function(e,t,a){},"06f0":function(e,t,a){},"0c02":function(e,t,a){"use strict";var i=a("864f"),n=a.n(i);n.a},"0e01":function(e,t,a){},12:function(e,t){},13:function(e,t){},"14a8":function(e,t,a){},"20cc":function(e,t,a){"use strict";var i=a("0e01"),n=a.n(i);n.a},"2a10":function(e,t,a){"use strict";var i=a("3b90"),n=a.n(i);n.a},"2fe1":function(e,t,a){},"311b":function(e,t,a){},"3ae0":function(e,t,a){},"3b90":function(e,t,a){},"3bba":function(e,t,a){e.exports=a.p+"img/rectangle.15d8e16b.svg"},4105:function(e,t,a){e.exports=a.p+"img/imglab_logo.786c0dcc.png"},"41d4":function(e,t,a){"use strict";var i=a("2fe1"),n=a.n(i);n.a},"4a27":function(e,t,a){"use strict";var i=a("e89f"),n=a.n(i);n.a},"52b5":function(e,t,a){},5300:function(e,t,a){"use strict";var i=a("8160"),n=a.n(i);n.a},5313:function(e,t){e.exports="data:image/png;base64,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"},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"imglab"},[a("prompt-restore"),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row overlay-color align-items-center",attrs:{id:"menubar"}},[a("div",{staticClass:"col-3 col-sm-2 col-md-1 col-xl-1 no-pl"},[a("app-menu")],1),e._m(0),e._m(1)]),a("div",{staticClass:"row",staticStyle:{height:"95vh"}},[a("div",{staticClass:"col-1 overlay-color grey-border",attrs:{id:"toolbar"}},[a("toolbox",{attrs:{toolType:e.LABEL_TAG}}),a("toolbox",{staticClass:"toolbox-border-top",attrs:{toolType:e.CANVAS_TAG}}),a("mouse-coord")],1),a("div",{staticClass:"col-9 base-color",staticStyle:{height:"100%"}},[a("div",[a("actionbar",{staticStyle:{height:"10%"}})],1),a("div",{staticStyle:{height:"75%"}},[a("workarea")],1),a("div",{staticClass:"grey-border",staticStyle:{height:"15%",width:"100%",margin:"0px 2px"}},[a("image-slider",{attrs:{"thumbnail-width":"90px"}})],1)]),a("div",{staticClass:"col-2 overlay-color grey-border"},[a("label-panel",{staticStyle:{flex:"1",overflow:"auto"}})],1)])])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"col-6 col-sm-6 col-md-7 col-xl-7 text-center"},[i("div",{staticClass:"row justify-content-center align-content-center"},[i("a",{attrs:{href:"https://github.com/NaturalIntelligence/imglab"}},[i("img",{staticStyle:{"margin-top":"2px"},attrs:{src:a("4105"),height:"48px"}}),i("span",{staticStyle:{"font-size":"2em","margin-top":"5px"}},[e._v("Img Lab")])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3 col-sm-4 col-md-4 col-xl-4"},[a("div",{staticClass:"form-inline flex-row-reverse float-right"})])}],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(e.action,{tag:"component"})},r=[],c=a("c93e"),l=a("2f62"),u=a("a322"),A="rect",d="circle",p="polygon",h="point",f="move",g="zoom",m="opacity",v="label",b="canvas",y="shape",S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"range-slider"},[a("input",{staticClass:"input-range",attrs:{type:"range",step:e.opacityStepSize,min:"0",max:"1.0"},domProps:{value:e.imageOpacity},on:{change:e.dispatch}})])},w=[],I={computed:Object(c["a"])({},Object(l["b"])("app-config",{opacityStepSize:"getOpacityStepSize"}),Object(l["b"])("image-store",{imageSelected:"getImageSelected"}),{imageOpacity:function(){return this.imageSelected?this.imageSelected.opacity:1}}),methods:Object(c["a"])({},Object(l["c"])("image-store",{updateImageDetail:"updateImageDetail"}),{dispatch:function(e){this.imageSelected&&this.updateImageDetail({opacity:e.target.value})}})},D=I,C=(a("2a10"),a("2877")),P=Object(C["a"])(D,S,w,!1,null,"56f8afe0",null);P.options.__file="action-opacity.vue";var x=P.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"zoom-bar"},[a("div",{staticClass:"zoom-button"},[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:["fas","search-plus"]},on:{click:e.zoomIn}})],1),a("div",[a("input",{attrs:{id:"zoom-scale",type:"text",maxlength:"4",size:"4",disabled:""},domProps:{value:e.imageScale+"%"}})]),a("div",{staticClass:"zoom-button"},[a("font-awesome-icon",{attrs:{icon:["fas","search-minus"]},on:{click:e.zoomOut}})],1),a("div",{staticClass:"zoom-button"},[a("font-awesome-icon",{attrs:{icon:["fas","undo"]},on:{click:e.zoomReset}})],1)])},E=[],_=(a("6762"),a("ac6a"),a("28a5"),a("1c4c"),a("20d6"),a("f751"),{autosave:{syncingInterval:1e4,enable:!0,deleteIfExported:!0},zoomStepSize:.1,opacityStepSize:.1,featurePointColor:"#ee0000"}),j={setZoomStepSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.zoomStepSize,i=void 0===a?.1:a;e.zoomStepSize=i},setOpacityStepSize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.opacityStepSize,i=void 0===a?.1:a;e.opacityStepSize=i},setFeaturePointColor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.featurePointColor,i=void 0===a?"#ee0000":a;e.featurePointColor=i},setAutoSave:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.syncingInterval,i=void 0===a?1:a,n=t.enable,o=void 0===n||n,s=t.deleteIfExported,r=void 0===s||s;e.autosave={syncingInterval:i,enable:o,deleteIfExported:r}},init:function(e,t){var a=t.autosave,i=a.syncingInterval,n=void 0===i?1e4:i,o=a.enable,s=void 0===o||o,r=a.deleteIfExported,c=void 0===r||r,l=t.zoomStepSize,u=void 0===l?.1:l,A=t.opacityStepSize,d=void 0===A?.1:A,p=t.featurePointColor,h=void 0===p?"#ee0000":p;this.autosave={syncingInterval:n,enable:s,deleteIfExported:c},this.zoomStepSize=u,this.opacityStepSize=d,this.featurePointColor=h}},k={getFeaturePointColor:function(e){return e.featurePointColor},getZoomStepSize:function(e){return e.zoomStepSize},getOpacityStepSize:function(e){return e.opacityStepSize},getAutosave:function(e){return e.autosave},getStoreData:function(e){var t=a("254d");return t(e)}},z={namespaced:!0,state:_,mutations:j,getters:k},B=(a("4f7f"),{copiedElements:[],selectedTool:null,selectedToolDom:null,selected:{shapes:[],featurePoints:[],lastShape:null}}),T={addSelectedElement:function(e,t){var a=t.shapeID,i=t.featurePointID;a&&(ce({arr:e.selected.shapes,item:a}),e.selected.lastShape=a),i&&ce({arr:e.selected.featurePoints,item:i})},addCopiedElement:function(e,t){var a=t.item;a&&e.copiedElements.push(a)},removeSelectedElement:function(e,t){var a=t.shapeID,i=t.featurePointID;a===e.selected.lastShape?(e.selected.shapes.splice(-1),e.selected.lastShape=e.selected.shapes.slice(-1)[0]||null):(le({arr:e.selected.shapes,item:a}),le({arr:e.selected.featurePoints,item:i}))},setCopiedElements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.copiedElements,i=void 0===a?[]:a;e.copiedElements=i},setSelectedTool:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.dom,i=t.selectedTool;e.selectedTool&&e.selectedToolDom&&e.selectedToolDom.classList.remove("tool-selected"),e.selectedTool=i,e.selectedToolDom=a,a&&e.selectedToolDom.classList.add("tool-selected")},setSelectedElements:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.shapes,i=t.featurePoints;e.selected.shapes=re(a),e.selected.featurePoints=re(i),e.selected.lastShape=e.selected.shapes.slice(-1)[0]||null},init:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.copiedElements,i=void 0===a?[]:a,n=t.selectedTool,o=void 0===n?null:n,s=t.selected,r=void 0===s?{shapes:new Set,featurePoints:new Set}:s}},F={getCopiedElements:function(e){return e.copiedElements},getSelectedTool:function(e){return e.selectedTool},getSelectedShape:function(e){return e.selected.lastShape},getSelectedShapes:function(e){return e.selected.shapes},getSelectedFeaturePoints:function(e){return e.selected.featurePoints},getConfig:function(e){return e}},Q={namespaced:!0,state:B,mutations:T,getters:F},M=(a("8615"),a("456d"),a("7f7f"),a("c665")),L=function e(t){var a=t.id,i=t.name,n=void 0===i?"":i,o=t.src,s=void 0===o?"":o,r=t.shapes,c=void 0===r?[]:r,l=t.shapeIndex,u=void 0===l?0:l,A=t.featurePointSize,d=void 0===A?3:A,p=t.opacity,h=void 0===p?1:p,f=t.size,g=void 0===f?{width:0,height:0,scaledWidth:0,scaledHeight:0,imageScale:1}:f;Object(M["a"])(this,e),this.id=a,this.name=n,this.src=s,this.size=g,this.shapes=c,this.shapeIndex=u,this.featurePointSize=d,this.opacity=h},$=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.cx,i=void 0===a?0:a,n=t.cy,o=void 0===n?0:n,s=t.id,r=void 0===s?"":s,c=t.label,l=void 0===c?"":c;Object(M["a"])(this,e),this.cx=i,this.cy=o,this.id=r,this.label=l},V=function e(t){var a=t.key,i=t.property,n=t.value;Object(M["a"])(this,e),this.key=a,this.property=i,this.value=n},N=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.attributes,i=void 0===a?[]:a,n=t.category,o=void 0===n?"":n,s=t.defaultZoomScale,r=void 0===s?1:s,c=t.featurePoints,l=void 0===c?[]:c,u=t.featurePointIndex,A=void 0===u?0:u,d=t.id,p=t.label,h=void 0===p?"":p,f=t.points,g=t.rbox,m=t.tags,v=void 0===m?[]:m,b=t.type,y=t.zoomScale,S=void 0===y?1:y;Object(M["a"])(this,e),this.id=d,this.label=h,this.type=b,this.category=o,this.points=f,this.rbox=g,this.attributes=i,this.tags=v,this.featurePoints=l,this.featurePointIndex=A,this.zoomScale=S,this.defaultZoomScale=r};function H(e){var t=e.id,a=e.type,i=e.rbox,n=e.points,o=e.scale,s=void 0===o?1:o;return new N({id:t,type:a,rbox:G(i,s)||{x:0,y:0,w:0,h:0,width:0,height:0},points:Y(n,s,a),defaultZoomScale:s})}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e)return e.map(function(e){return e*t})}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e)return{x:Math.floor(e.x*t),y:Math.floor(e.y*t),cx:Math.floor((e.cx||0)*t),cy:Math.floor((e.cy||0)*t),w:Math.floor(e.w*t),h:Math.floor(e.h*t),width:Math.floor(e.w*t),height:Math.floor(e.h*t)}}function K(e){var t=e.point,a=e.scale,i=void 0===a?1:a;return new $({cx:t.cx*i,cy:t.cy*i,label:t.label,id:t.id})}function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(e)return e.map(function(e){return K({point:e,scale:t})})}var J={images:{},shapes:{},featurePoints:{},imageSelected:null,imageIndex:0},U={addImageToStore:function(e,t){var a=t.name,i=t.src,n=t.size;if(e.images[a]){var o=e.images[a];e.images[a]=Object(c["a"])({},o,{src:i,size:n})}else{var s=e.imageIndex++,r=new L({id:s,name:a,src:i,size:n});e.images=Object(c["a"])({},e.images,Object(u["a"])({},a,r))}},addShapeToImage:function(e,t){var a=t.id,i=t.type,n=t.rbox,o=t.points,s=e.imageSelected,r=H({id:a,type:i,rbox:n,points:o,scale:1/s.size.imageScale});return s.shapeIndex++,s.shapes.push(a),e.shapes=Object(c["a"])({},e.shapes,Object(u["a"])({},a,r)),r},addPointToShape:function(e,t){var a=t.shapeID,i=t.pointID,n=t.position,o=e.shapes[a],s=1/e.imageSelected.size.imageScale;++o.featurePointIndex,o.featurePoints.push(i);var r=pe({id:i});e.featurePoints=Object(c["a"])({},e.featurePoints,Object(u["a"])({},i,new $({label:r,cx:n.cx*s,cy:n.cy*s,id:i})))},addAttributeToShape:function(e,t){var a=t.shapeID,i=t.property,n=t.value;if(i&&n){var o=Ae(i,n);e.shapes[a].attributes.push(new V({key:o,property:i,value:n}))}},addTagToShape:function(e,t){var a=t.shapeID,i=t.tag;ce({arr:e.shapes[a].tags,item:i})},detachShapeFromImage:function(e,t){var a=t.imageName,i=t.shapeID,n=a||e.imageSelected.name,o=e.images[n].shapes,s=o.findIndex(function(e){return e===i});s<0||(o.splice(s,1),e.shapes[i].featurePoints.forEach(function(t){e.featurePoints[t]=void 0}),e.shapes[i]=void 0)},detachFeaturePoint:function(e,t){var a=t.shapeID,i=t.featurePointID,n=e.shapes[a],o=n.featurePoints.findIndex(function(e){return e===i});-1!==o&&(n.featurePoints.splice(o,1),e.featurePoints[i]=void 0)},removeAttributeFromShape:function(e,t){var a=t.shapeID,i=t.index;e.shapes[a].attributes.splice(i,1)},removeTagFromShape:function(e,t){var a=t.shapeID,i=t.tag;le({arr:e.shapes[a].tags,item:i})},removeValueFromAttribute:function(e,t){var a=t.shapeID,i=t.attribute,n=t.value,o=Ae(a,i);e.shapeAttributes[o]&&le({arr:e.shapeAttributes[o],item:n})},setFeaturePointSize:function(e,t){var a=t.featurePointSize;e.imageSelected&&(e.imageSelected.featurePointSize=a)},setImageSelected:function(e,t){var a=t.name;a&&(e.imageSelected=e.images[a])},setShapeCategory:function(e,t){var a=t.shapeID,i=t.category,n=void 0===i?"":i;e.shapes[a].category=n},updateAttribute:function(e,t){var a=t.shapeID,i=t.oldProp,n=t.oldValue,o=t.newProp,s=t.newValue;if(i&&n&&o&&s){var r=Ae(i,n),c=Ae(o,s),l=e.shapes[a].attributes,u=l.findIndex(function(e){return e.key===r});l.splice(u,1,new V({key:c,property:o,value:s}))}},updateFeaturePoint:function(e,t){var a=t.pointID,i=t.position,n=t.newLabel,o=void 0===n?void 0:n,s=1/e.imageSelected.size.imageScale,r=e.featurePoints[a];i&&(r.cx=i.cx*s,r.cy=i.cy*s),o&&(r.label=o)},updateFeaturePoints:function(e,t){var a=t.shapeID,i=t.featurePoints,n=t.switchPosition,o=void 0!==n&&n,s=e.shapes[a],r=1/e.imageSelected.size.imageScale;if(s.featurePoints=i.map(function(e){return e.id}),!o){var l=R(i,r),u={};l.forEach(function(e){return u[e.id]=e}),e.featurePoints=Object(c["a"])({},e.featurePoints,u)}},updateShapeDetail:function(e,t){var a=t.shapeID,i=t.category,n=t.tags,o=t.label,s=t.points,r=t.rbox,c=t.zoomScale,l=e.shapes[a],u=1/e.imageSelected.size.imageScale;i&&(l.category=i),n&&(l.tags=n),o&&(l.label=o),s&&(l.points=Y(s,u,l.type)),r&&(l.rbox=G(r,u)),c&&(l.zoomScale=c)},updateImageDetail:function(e,t){var a=t.name,i=t.scaledWidth,n=t.scaledHeight,o=t.imageScale,s=t.shapeIndex,r=t.pointIndex,c=t.featurePointSize,l=t.opacity,u=e.imageSelected;a&&(u.name=a),i&&(u.size.scaledWidth=i),n&&(u.size.scaledHeight=n),o&&(u.size.imageScale=o),s&&(u.shapeIndex=s),r&&(u.pointIndex=r),c&&(u.featurePointSize=c),l&&(u.opacity=l)},init:function(e,t){var a=t.images,i=void 0===a?{}:a,n=t.shapes,o=void 0===n?{}:n,s=t.featurePoints,r=void 0===s?{}:s,c=t.imageIndex;e.images=i,e.shapes=o,e.featurePoints=r,e.imageSelected=null,c||(c=Object.keys(i).length),e.imageIndex=c}},W={getImages:function(e){return Object.values(e.images)},getImageSelected:function(e){return e.imageSelected},getImageByName:function(e){return function(t){return e.images[t]}},getShapeByID:function(e){return function(t){return e.shapes[t]}},getShapeAttributes:function(e){return function(t){return e.shapes[t].attributes}},getShapeAttributeValues:function(e){return function(t){var a=t.shapeID,i=t.attribute,n=Ae(a,i);return e.shapeAttributes[n]}},getShapeFeaturePoints:function(e){return function(t){return e.shapes[t].featurePoints.map(function(t){return e.featurePoints[t]})}},getShapeFeaturePointIDs:function(e){return function(t){return e.shapes[t].featurePoints}},getFeaturePointByID:function(e){return function(t){return e.featurePoints[t]}},getFeaturePointSize:function(e){return e.imageSelected&&e.imageSelected.featurePointSize||3},getStoreData:function(e){var t=a("254d");return t(e)},nextShapeHash:function(e){return function(t){var a=t?e.images[t]:e.imageSelected;if(a)return a.id+"-"+a.shapeIndex}},nextFeaturePointHash:function(e){return function(t){var a=e.shapes[t];if(a){var i=a.id.split("#");return i[1]+"-"+a.featurePointIndex}}}},X={namespaced:!0,state:J,mutations:U,getters:W},Z={properties:[],propValues:{},categories:[],tags:[]},q={addAttribute:function(e,t){var a=t.property,i=t.value;a&&i&&(ce({arr:e.properties,item:a}),e.propValues[a]?ce({arr:e.propValues[a],item:i}):e.propValues=Object(c["a"])({},e.propValues,Object(u["a"])({},a,[i])))},addProperty:function(e,t){var a=t.property;a&&(ce({arr:e.properties,item:a}),e.propValues[a]||(e.propValues=Object(c["a"])({},e.propValues,Object(u["a"])({},a,[]))))},addCategory:function(e,t){var a=t.category;a&&ce({arr:e.categories,item:a})},addTag:function(e,t){var a=t.tag;a&&ce({arr:e.tags,item:a})},addValue:function(e,t){var a=t.property,i=t.value;a&&i&&ce({arr:e.propValues[a],item:i})},setProperties:function(e,t){var a=t.properties,i=t.propValues;e.properties=a,e.propValues=i},setProperty:function(e,t){var a=t.property,i=t.values,n=e.propValues[a];n&&(e.propValues[a]=i)},setCategories:function(e,t){var a=t.categories;e.categories=a},setTags:function(e,t){var a=t.tags;e.tags=a},removeProperty:function(e,t){var a=t.property;a&&le({arr:e.properties,item:a}),e.propValues[a]=void 0},removeCategory:function(e,t){var a=t.category;a&&le({arr:e.categories,item:a})},removeTag:function(e,t){var a=t.tag;a&&le({arr:e.tags,item:a})},removeValue:function(e,t){var a=t.property,i=t.value;i&&le({arr:e.propValues[a],item:i})},init:function(e,t){var a=t.properties,i=void 0===a?[]:a,n=t.propValues,o=void 0===n?{}:n,s=t.categories,r=void 0===s?[]:s,c=t.tags,l=void 0===c?[]:c;e.properties=i,e.propValues=o,e.categories=r,e.tags=l}},ee={getCategory:function(e){return e.categories},getProperties:function(e){return e.properties},getTags:function(e){return e.tags},getValues:function(e){return function(t){return e.propValues[t]}},getStoreData:function(e){var t=a("254d");return t(e)}},te={namespaced:!0,state:Z,mutations:q,getters:ee};i["a"].use(l["a"]);var ae={initializeStore:function(e,t){var a=t.storeData;a||(a=localStorage.getItem("imglab-store")),this.replaceState(Object.assign(e,a))}},ie={getLocalStoreData:function(){return localStorage.getItem("imglab-store")}},ne=new l["a"].Store({modules:{"app-config":z,"action-config":Q,"image-store":X,"label-data":te},getters:ie,mutations:ae}),oe=ne;function se(e,t){var a=t.getBoundingClientRect(),i=e.clientX-a.left,n=e.clientY-a.top;return{x:Math.round(i),y:Math.round(n)}}function re(e){return e?e.constructor===Array?e:[e]:[]}function ce(e){var t=e.arr,a=e.item,i=e.key;i||(i=a);var n=t.findIndex(function(e){return e===i||e.key===i});-1===n&&t.push(a)}function le(e){var t=e.arr,a=e.item,i=e.key;i||(i=a);var n=t.findIndex(function(e){return e===i||e.key===i});-1!==n&&t.splice(n,1)}var ue={on:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.addEventListener(t,a,i)},off:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return e.removeEventListener(t,a,i)}};function Ae(){var e=Array.from(arguments);return e.slice(1).reduce(function(e,t){return e+":"+t},e[0])}function de(e){var t=e.svg,a=e.id,i=document.getElementById(a);return t.adopt(i)}function pe(e){var t=e.id,a=t.split("#"),i=a[1].split("-"),n=i.pop();return a[0]+"#"+n}function he(e){var t=e.type,a=oe.getters["image-store/nextShapeHash"]();return t+"#"+a}function fe(e){var t=e.shapeID,a=oe.getters["image-store/nextFeaturePointHash"](t);return h+"#"+a}var ge={data:function(){return{scale:100}},computed:Object(c["a"])({},Object(l["b"])("image-store",{imageSelected:"getImageSelected",getShapeByID:"getShapeByID"}),Object(l["b"])("app-config",{zoomStepSize:"getZoomStepSize"}),{imageScale:function(){return this.imageSelected?Math.floor(100*this.imageSelected.size.imageScale):100}}),methods:Object(c["a"])({},Object(l["c"])("image-store",["updateShapeDetail","updateImageDetail"]),{zoomIn:function(){if(this.imageSelected&&!(this.imageSelected.size.imageScale>=10)){var e=this.imageSelected.size.imageScale,t=e+this.zoomStepSize;this.rescaleImage(t),this.rescaleShapes(e,t)}},zoomOut:function(){if(this.imageSelected&&!(this.imageSelected.size.imageScale<=.1)){var e=this.imageSelected.size.imageScale,t=e-this.zoomStepSize;this.rescaleImage(t),this.rescaleShapes(e,t)}},zoomReset:function(){var e=this;this.imageSelected&&(this.rescaleImage(1),this.imageSelected.shapes.forEach(function(t){var a=e.getShapeByID(t);e.updateShapeDetail({shapeID:a.id,zoomScale:a.defaultZoomScale})}))},rescaleShapes:function(e,t){var a=this;this.imageSelected.shapes.forEach(function(i){var n=a.getShapeByID(i);a.updateShapeDetail({shapeID:n.id,zoomScale:n.zoomScale*t/e})})},rescaleImage:function(e){this.updateImageDetail({scaledWidth:Math.floor(this.imageSelected.size.width*e),scaledHeight:Math.floor(this.imageSelected.size.height*e),imageScale:e})},shortcuts:function(e){var t=e.key,a=["[","]"];a.includes(t)&&e.altKey&&!e.ctrlKey&&("]"===t?this.zoomIn():this.zoomOut())}}),created:function(){ue.on(document,"keydown",this.shortcuts)},beforeDestroy:function(){ue.off(document,"keydown",this.shortcuts)}},me=ge,ve=(a("626c"),Object(C["a"])(me,O,E,!1,null,"b2b1bf94",null));ve.options.__file="action-zoom.vue";var be=ve.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"action-wrapper"},[a("div",{staticClass:"range-slider"},[a("input",{staticClass:"input-range",attrs:{type:"range",step:"1",min:"3",max:"100"},domProps:{value:e.featurePointSize},on:{input:e.setPointSize}})]),a("div",{staticClass:"colorpicker"},[a("input",{attrs:{type:"color",id:"colorpicker",name:"colorpicker"},domProps:{value:e.featurePointColor},on:{change:e.setColorInStore,input:function(t){e.switchColor(t.target.value)}}})])])},Se=[],we=(a("6c7b"),a("84a2")),Ie={computed:Object(c["a"])({},Object(l["b"])("image-store",{imageSelected:"getImageSelected",featurePointSize:"getFeaturePointSize",getShapeFeaturePoints:"getShapeFeaturePoints",getShapeByID:"getShapeByID"}),Object(l["b"])("app-config",{featurePointColor:"getFeaturePointColor"})),methods:Object(c["a"])({},Object(l["c"])("image-store",{setFeaturePointSize:"setFeaturePointSize"}),Object(l["c"])("app-config",{setFeaturePointColor:"setFeaturePointColor"}),{applyFeaturePointChanges:function(e){var t=this;if(this.imageSelected){var a=this.imageSelected.shapes.map(function(e){return t.getShapeByID(e)});a.forEach(function(t){t.featurePoints.forEach(e)})}},setColorInStore:function(e){this.featurePointColor!==e.target.value&&this.setFeaturePointColor({featurePointColor:e.target.value})},setPointSize:we(function(e){var t=this;this.setFeaturePointSize({featurePointSize:e.target.value}),this.applyFeaturePointChanges(function(a){var i=de({svg:t.$svg,id:a});i.radius(e.target.value)})},33),switchColor:we(function(e){var t=this;this.imageSelected&&this.applyFeaturePointChanges(function(a){var i=de({svg:t.$svg,id:a});i.fill(e)})},33)})},De=Ie,Ce=(a("5300"),Object(C["a"])(De,ye,Se,!1,null,"54df26ca",null));Ce.options.__file="action-feature-point.vue";var Pe,xe=Ce.exports,Oe=(Pe={},Object(u["a"])(Pe,m,x),Object(u["a"])(Pe,g,be),Object(u["a"])(Pe,h,xe),Pe),Ee={data:function(){return{actions:Oe,action:null}},computed:Object(c["a"])({},Object(l["b"])("action-config",{selectedTool:"getSelectedTool"})),watch:{selectedTool:function(){this.selectedTool&&this.selectedTool.actionable?this.action=this.actions[this.selectedTool.type]:this.action=null}}},_e=Ee,je=(a("ddc1"),Object(C["a"])(_e,s,r,!1,null,"587e921c",null));je.options.__file="action-bar.vue";var ke=je.exports,ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.tools[e.toolType]?i("div",e._l(e.tools[e.toolType],function(t,n){return i("div",{key:n,ref:t.title,refInFor:!0,staticClass:"tool-button",attrs:{id:t.title},on:{click:function(a){e.dispatch(t)}}},[t.icon.isSVG?i("img",{attrs:{src:a("67f7")("./"+t.icon.name),alt:t.title}}):i("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:[t.icon.type,t.icon.name]}}),i("div",[e._v("\n      "+e._s(t.title)+"\n    ")])],1)})):e._e()},Be=[],Te=(a("2fdb"),a("c5f6"),a("04ff"),{type:y,title:A,description:"Draw a rectanglular box",drawable:!0,actionable:!1,icon:{isSVG:!0,name:"rectangle.svg"},create:function(e){var t=e.canvas,a=he({type:A}),i=t.nested().rect().id(a).addClass("labelbox shape").resize();return i},validate:function(e){return Number.parseInt(e.attr("width"))>3}}),Fe={type:y,title:d,description:"Draw a circle",drawable:!0,actionable:!1,icon:{isSVG:!0,name:"circle.svg"},create:function(e){var t=e.canvas,a=he({type:d}),i=t.nested().circle().radius().id(a).addClass("labelcircle shape").resize();return i},validate:function(e){return Number.parseInt(e.attr("r"))>3}},Qe={type:y,title:p,description:"Draw a polygon",drawable:!0,actionable:!1,icon:{isSVG:!0,name:"polygon.svg"},create:function(e){var t=e.canvas,a=he({type:p}),i=t.nested().polygon().id(a).addClass("labelpolygon shape").resize();return i},validate:function(){return!0}},Me={type:h,title:h,description:"Draw a point",drawable:!1,actionable:!0,icon:{isSVG:!0,name:"point.svg"},create:function(e){var t=e.canvas,a=e.event,i=e.shape,n=e.featurePointSize,o=e.featurePointColor,s=t.node.getBoundingClientRect(),r=Le({event:a,shape:i,canvasOffset:s,featurePointSize:n,featurePointColor:o});return r},validate:function(){return!0}};function Le(e){var t=e.event,a=void 0===t?{}:t,i=e.position,n=void 0===i?{}:i,o=e.shape,s=e.canvasOffset,r=e.featurePointSize,c=e.featurePointColor,l=fe({shapeID:o.id()}),u={x:parseInt(o.parent().attr("x"),10)||0,y:parseInt(o.parent().attr("y"),10)||0},A=o.parent().circle().radius(r).id(l).addClass("labelpoint").attr({for:o.node.id,cx:(a.x||n.cx)-s.x-u.x,cy:(a.y||n.cy)-s.y-u.y,fill:c}).draggable();return A.type=h,A}var $e,Ve,Ne,He={type:f,title:f,description:"Drag and move a shape",drawable:!1,actionable:!1,icon:{isSVG:!1,name:"hand-rock",type:"far"}},Ye={type:g,title:g,description:"Zoom in or zoom out",drawable:!1,actionable:!0,icon:{isSVG:!1,name:"search-plus",type:"fas"}},Ge={type:m,title:m,description:"Change image opacity",drawable:!1,actionable:!0,icon:{isSVG:!1,name:"lightbulb",type:"far"}},Ke=(Ne={},Object(u["a"])(Ne,v,($e={},Object(u["a"])($e,h,Me),Object(u["a"])($e,A,Te),Object(u["a"])($e,d,Fe),Object(u["a"])($e,p,Qe),$e)),Object(u["a"])(Ne,b,(Ve={},Object(u["a"])(Ve,f,He),Object(u["a"])(Ve,g,Ye),Object(u["a"])(Ve,m,Ge),Ve)),Ne),Re={props:{toolType:{type:String,default:v}},data:function(){return{tools:Ke}},computed:Object(c["a"])({},Object(l["b"])("action-config",{selectedTool:"getSelectedTool"})),methods:Object(c["a"])({},Object(l["c"])("action-config",{setSelectedTool:"setSelectedTool"}),{dispatch:function(e){var t=this.$refs[e.title][0];this.selectedTool&&e.title===this.selectedTool.title?this.setSelectedTool():this.setSelectedTool({dom:t,selectedTool:e})},shortcuts:function(e){var t=e.key,a=["[","]"];if(a.includes(t)&&e.altKey){var i=this.selectedTool;if(i&&i.title===g)return;t="z"}var n=["f","r","c","p","m","z","l"],o={f:h,r:A,c:d,p:p,m:f,z:g,l:m};if(n.includes(t)){var s=o[t],r=Object.keys(this.tools[this.toolType]);r.includes(s)&&e.altKey&&!e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),this.$refs[s][0].click())}}}),mounted:function(){ue.on(document,"keydown",this.shortcuts)},beforeDestroy:function(){ue.off(document,"keydown",this.shortcuts)}},Je=Re,Ue=(a("4a27"),Object(C["a"])(Je,ze,Be,!1,null,"77755cd8",null));Ue.options.__file="toolbox.vue";var We=Ue.exports,Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"canvas-container"}},[a("div",{staticClass:"canvas-wrapper",style:{width:e.imageWidth+50+"px",height:e.imageHeight+50+"px"}},[a("img",{style:{width:e.imageWidth+"px",height:e.imageHeight+"px",opacity:e.imageOpacity},attrs:{id:"img",src:e.imageSrc}}),a("div",{ref:"workcanvas",style:{width:e.imageWidth+"px",height:e.imageHeight+"px"},attrs:{id:"work-canvas"},on:{click:e.deselectAll,mousemove:e.onMouseMove,mouseleave:e.onMouseLeave,mousedown:e.mouseDown,mouseup:e.mouseUp}})])])},Ze=[],qe=a("1929"),et=a.n(qe),tt=new i["a"],at=a("f7fe"),it=at(function(e){var t=e.shapeID,a=e.rbox,i=e.points,n=e.featurePoints;oe.commit("image-store/updateFeaturePoints",{shapeID:t,featurePoints:n}),oe.commit("image-store/updateShapeDetail",{shapeID:t,rbox:a,points:i})},500),nt={data:function(){return{alreadyDrawing:!1,canvas:null,drawingShape:null}},computed:Object(c["a"])({},Object(l["b"])("action-config",{copiedElements:"getCopiedElements",selectedTool:"getSelectedTool",selectedShapes:"getSelectedShapes",selectedFeaturePoints:"getSelectedFeaturePoints"}),Object(l["b"])("image-store",{imageSelected:"getImageSelected",getShapeByID:"getShapeByID",getShapeFeaturePoints:"getShapeFeaturePoints",getFeaturePointByID:"getFeaturePointByID",featurePointSize:"getFeaturePointSize"}),Object(l["b"])("app-config",{featurePointColor:"getFeaturePointColor"}),{imageWidth:function(){return this.imageSelected?this.imageSelected.size.scaledWidth:0},imageHeight:function(){return this.imageSelected?this.imageSelected.size.scaledHeight:0},imageOpacity:function(){return this.imageSelected?this.imageSelected.opacity:1},imageSrc:function(){return this.imageSelected?this.imageSelected.src:""},imageScale:function(){return this.imageSelected?this.imageSelected.size.imageScale:0}}),watch:{imageSelected:function(){this.setSelectedElements(),this.drawCanvas()},imageScale:function(){this.drawCanvas()},selectedShapes:function(){var e=this;this.selectedShapes.forEach(function(t){var a=de({svg:e.$svg,id:t});a.selectize({rotationPoint:!1})})},selectedFeaturePoints:function(){var e=this;this.selectedFeaturePoints.forEach(function(t){var a=de({svg:e.$svg,id:t});a.selectize({rotationPoint:!1,points:[]})})}},methods:Object(c["a"])({},Object(l["c"])("action-config",["setCopiedElements","addSelectedElement","addCopiedElement","setSelectedElements"]),Object(l["c"])("image-store",["addImageToStore","addShapeToImage","addPointToShape","detachShapeFromImage","updateFeaturePoint","updateShapeDetail"]),Object(l["c"])("image-store",{updateFeaturePointsInStore:"updateFeaturePoints"}),{attachEvents:function(e){var t=this;this.dragOnMove(e),this.customDragHandler(e.parent(),function(){t.selectedTool&&t.selectedTool.type===f&&(t.updateShapeDetail({shapeID:e.node.id,rbox:e.rbox(t.canvas),points:t.getPoints(e)}),t.updateFeaturePointsInStore({shapeID:e.id(),featurePoints:t.getFeaturePointsFromSVG(e.id())}))}),e.on("click",function(a){if(a.stopPropagation(),t.selectedTool&&"point"===t.selectedTool.type){var i=Le({event:a,shape:e,canvasOffset:t.canvas.node.getBoundingClientRect(),featurePointSize:t.featurePointSize,featurePointColor:t.featurePointColor});t.addPointToShape({shapeID:e.node.id,pointID:i.node.id,position:i.rbox(t.canvas)}),t.attachEventsToFeaturePoint(i,e)}else a.altKey?(t.deselectAll(),e.selectize({rotationPoint:!1,deepSelect:!0}),t.addSelectedElement({shapeID:e.id()})):(a.ctrlKey||t.deselectAll(),e.selectize({rotationPoint:!1}),t.addSelectedElement({shapeID:e.id()}))})},attachEventsToFeaturePoint:function(e,t){var a=this;this.dragOnMove(e),this.customDragHandler(e,function(){a.updateFeaturePoint({shapeID:t.id(),pointID:e.id(),position:e.rbox(a.canvas)})}),e.on("click",function(i){t.selectize(!1),i.ctrlKey||a.deselectAll({shape:!0}),e.selectize({rotationPoint:!1,points:[]}),a.addSelectedElement({shapeID:t.id(),featurePointID:e.id()}),i.stopPropagation()})},attachShapeListeners:function(e){var t=this;e.on("drawstop",function(){t.alreadyDrawing=!1,t.drawingShape=null,t.selectedTool.validate(e)?(e.parent().draggable(),t.addShapeToImage({id:e.node.id,type:e.type,rbox:e.rbox(t.canvas),points:t.getPoints(e)}),t.attachEvents(e)):(e.parent().remove(),e.remove())}),e.on("resizedone",function(){it({shapeID:e.node.id,rbox:e.rbox(t.canvas),points:t.getPoints(e)})})},copyShape:function(){var e=this;this.setCopiedElements(),this.selectedShapes.forEach(function(t){var a=e.getShapeByID(t),i=[];a.featurePoints.forEach(function(t){var a=e.getFeaturePointByID(t);i.push(new $(a))});var n=new N(a);n.featurePoints=i,e.addCopiedElement({item:n})})},customDragHandler:function(e,t){var a=0;e.on("mousedown",function(){a=1;var i=function(){a=2},n=function n(o){2===a&&t&&t(o),a=0,e.off("mousemove",i),e.off("mouseup",n)};e.on("mousemove",i),e.on("mouseup",n)})},deselectAll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.shape,i=void 0!==a&&a,n=t.featurePoint,o=void 0!==n&&n;this.selectedShapes.forEach(function(t){var a=de({svg:e.$svg,id:t});a.selectize(!1)}),this.selectedFeaturePoints.forEach(function(t){var a=de({svg:e.$svg,id:t});a.selectize(!1)}),this.setSelectedElements({shapes:i?this.selectedShapes:[],featurePoints:o?this.selectedFeaturePoints:[]})},dragOnMove:function(e){e.on("mousedown",function(e){this.selectedTool&&"move"===this.selectedTool.type||(e.preventDefault(),e.stopPropagation())},this)},drawCanvas:function(){this.canvas&&(this.canvas.clear(),this.canvas.remove()),this.canvas=et()("work-canvas"),this.drawShapes()},drawFeaturePoints:function(e,t){var a=R(e,this.imageSelected.size.imageScale);for(var i in a){var n=Le({position:a[i],canvasOffset:{x:0,y:0},shape:t,featurePointSize:this.featurePointSize,featurePointColor:this.featurePointColor});n.id(a[i].id),this.attachEventsToFeaturePoint(n,t)}},drawShape:function(e){if(e){var t,a=this.imageScale;switch(e.type){case A:var i=this.canvas.nested().rect(e.points[2]*a,e.points[3]*a).move(e.points[0]*a,e.points[1]*a).id(e.id).addClass("labelbox shape").resize();i.parent().draggable(),t=i;break;case d:var n=this.canvas.nested().circle().radius(e.points[2]*a).attr({cx:e.points[0]*a,cy:e.points[1]*a}).id(e.id).addClass("labelcircle shape").resize();n.parent().draggable(),t=n;break;case p:var o=this.canvas.nested().polygon(Y(e.points,a,e.type)).id(e.id).addClass("labelpolygon shape").resize();o.parent().draggable(),t=o;break;default:console.error(e.type+" does not exist")}t&&(this.attachEvents(t),this.attachShapeListeners(t),this.drawFeaturePoints(this.getShapeFeaturePoints(t.id()),t))}},drawShapes:function(){var e=this;this.imageSelected&&this.imageSelected.shapes.forEach(function(t){var a=e.getShapeByID(t);e.drawShape(a)})},flushShortcuts:function(e){"ArrowLeft"!==e.key&&"ArrowUp"!==e.key&&"ArrowRight"!==e.key&&"ArrowDown"!==e.key||it.flush()},getFeaturePointsFromSVG:function(e){var t=this,a=[];return this.getShapeFeaturePoints(e).forEach(function(e){var i=e.id,n=e.label,o=de({svg:t.$svg,id:i}),s=o.rbox(t.canvas),r=s.cx,c=s.cy;a.push(new $({id:i,cx:r,cy:c,label:n}))}),a},getPoints:function(e){var t,a=this,i=(t={},Object(u["a"])(t,A,function(){var t=e.rbox(a.canvas);return[t.x,t.y,t.w,t.h]}),Object(u["a"])(t,d,function(){var t=e.rbox(a.canvas);return[t.cx,t.cy,e.attr("r")]}),Object(u["a"])(t,p,function(){var t=e.parent(),a=[],i={x:parseInt(t.attr("x"),10)||0,y:parseInt(t.attr("y"),10)||0};return e.array().value.forEach(function(e){a.push(e[0]+i.x,e[1]+i.y)}),a}),t);return i[e.type]()},mouseDown:function(e){if(this.deselectAll(),this.selectedTool&&!this.alreadyDrawing&&this.selectedTool.type===y){this.alreadyDrawing=!0;var t=this.selectedTool.create({canvas:this.canvas,event:e});this.selectedTool.title!==p?t.draw(e):t.on("drawstart",function(){ue.on(document,"keydown",function e(a){"Enter"===a.key&&(t.draw("done"),t.off("drawstart"),t.parent().draggable(),ue.off(document,"keydown",e))})}),this.drawingShape=t,this.attachShapeListeners(t)}},moveShape:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.dx,i=void 0===a?0:a,n=t.dy,o=void 0===n?0:n;this.selectedShapes.forEach(function(t){var a=de({svg:e.$svg,id:t});a.parent().dx(i).dy(o),it({shapeID:t,rbox:a.rbox(e.canvas),points:e.getPoints(a),featurePoints:e.getFeaturePointsFromSVG(t)})})},mouseUp:function(e){this.drawingShape&&this.drawingShape.draw(e)},onMouseMove:function(e){var t=this.$refs.workcanvas,a=se(e,t);tt.$emit("mouse-move",a.x,a.y)},onMouseLeave:function(){tt.$emit("mouse-leave")},pasteShape:function(){var e=this;this.setSelectedElements(),this.copiedElements.forEach(function(t){var a=he({type:t.type}),i=e.imageScale/t.zoomScale,n=H(Object(c["a"])({},t,{scale:i}));e.addShapeToImage(Object(c["a"])({},n,{id:a})),e.addSelectedElement({shapeID:a}),t.featurePoints.forEach(function(t){var n=fe({shapeID:a}),o=K({point:t,scale:i});e.addPointToShape({shapeID:a,pointID:n,position:{cx:o.cx,cy:o.cy}})})}),this.drawCanvas()},removeSelectedShapes:function(){var e=this;this.selectedShapes.forEach(function(t){var a=de({svg:e.$svg,id:t});a.selectize(!1),e.detachShapeFromImage({shapeID:t}),a.parent().clear(),a.remove()}),this.setSelectedElements()},selectAll:function(){var e=this;this.imageSelected&&this.imageSelected.shapes.forEach(function(t){var a=de({svg:e.$svg,id:t});a.selectize({rotationPoint:!1}),e.addSelectedElement({shapeID:t})})},shortcuts:function(e){"Delete"===e.key?(e.preventDefault(),e.stopPropagation(),this.removeSelectedShapes()):"a"===e.key&&e.altKey&&(e.preventDefault(),e.stopPropagation(),this.selectAll());var t={c:this.copyShape,v:this.pasteShape};if(t[e.key]&&e.ctrlKey)return e.preventDefault(),e.stopPropagation(),void t[e.key]();var a={ArrowLeft:{dx:-1},ArrowRight:{dx:1},ArrowUp:{dy:-1},ArrowDown:{dy:1}};return a[e.key]&&e.ctrlKey&&e.shiftKey?(e.preventDefault(),e.stopPropagation(),void this.moveShape(a[e.key])):void 0}}),mounted:function(){this.canvas=et()("work-canvas"),this.drawCanvas(),ue.on(document,"keydown",this.shortcuts),ue.on(document,"keyup",this.flushShortcuts)},destroyed:function(){this.canvas.clear(),this.canvas.remove(),ue.off(document,"keydown",this.shortcuts),ue.off(document,"keyup",this.flushShortcuts)}},ot=nt,st=(a("6fe1"),Object(C["a"])(ot,Xe,Ze,!1,null,"1e1bbf6c",null));st.options.__file="workarea.vue";var rt=st.exports,ct=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row align-items-center"},[a("div",{staticClass:"col-1"},[a("div",{staticStyle:{width:"50px","text-align":"center",padding:"10px"}},[a("label",[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:"images"}}),a("input",{ref:"uploadFile",staticClass:"filebutton",attrs:{type:"file",accept:"image/*",multiple:""},on:{change:e.readImageFiles}})],1),a("label",[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:["far","folder-open"]}}),a("input",{ref:"uploadFolder",attrs:{type:"file",webkitdirectory:"",mozdirectory:"",msdirectory:"",odirectory:"",directory:""},on:{change:e.readImageFiles}})],1)])]),a("div",{staticClass:"col-1"},[a("div",{staticStyle:{height:"100%","text-align":"center"},attrs:{id:"leftpaddle"},on:{click:e.slideleft}},[a("span",{staticStyle:{width:"50px",height:"90px"}},[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:"chevron-left"}})],1)])]),a("div",{staticClass:"col-9"},[a("div",{staticClass:"photolist-wrapper",staticStyle:{height:"90px",width:"100%",overflow:"hidden"}},[a("div",{ref:"photolist",staticClass:"d-flex align-items-center photolist",staticStyle:{height:"100%"},attrs:{id:"photolist"}},e._l(e.thumbnails,function(t,i){return a("img",{key:t.name+i,staticClass:"thumbnail",attrs:{id:"thumbnail_"+i,src:t.src,label:t.name,title:t.name,width:e.thumbnailWidth,"data-index":i},on:{click:function(t){e.loadIntoWorkArea(i)}}})}))])]),a("div",{staticClass:"col-1"},[a("div",{staticStyle:{height:"100%","text-align":"center"},attrs:{id:"rightpaddle"},on:{click:e.slideright}},[a("span",{staticStyle:{width:"50px",height:"90px"}},[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:"chevron-right"}})],1)])])])])},lt=[],ut=(a("f559"),{props:{thumbnailWidth:{type:String,default:"80px"}},data:function(){return{thumbnails:[]}},computed:Object(c["a"])({},Object(l["b"])("image-store",{images:"getImages"})),methods:Object(c["a"])({},Object(l["c"])("image-store",["setImageSelected","addImageToStore"]),{loadImage:function(e){var t=this,a=new Image;a.onload=function(){var a={width:this.width,height:this.height,scaledWidth:this.width,scaledHeight:this.height,imageScale:1};t.addImageToStore({src:e.src,name:e.name,size:a})},a.src=e.src},loadIntoWorkArea:function(e){var t=this.thumbnails[e];this.setImageSelected(t)},readImageFile:function(e){var t=this;if(e.type.startsWith("image")){var a=new FileReader;a.onload=function(a){var i=new L({name:e.name,src:a.target.result});t.loadImage(i),t.thumbnails.push(i)},a.readAsDataURL(e)}},readImageFiles:function(e){var t=e.srcElement||e.target;if(t.files&&t.files[0])for(var a=0;a<t.files.length;a++)this.readImageFile(t.files[a])},slideleft:function(){if(this.thumbnails&&0!==this.thumbnails.length){var e=this.thumbnails.shift();this.thumbnails.push(e)}},slideright:function(){if(this.thumbnails&&0!==this.thumbnails.length){var e=this.thumbnails.pop();this.thumbnails.unshift(e)}},shortcuts:function(e){var t=["n","m"],a=e.key;t.includes(a)&&e.ctrlKey&&e.altKey&&(e.preventDefault(),e.stopPropagation(),"n"===a?this.slideleft():this.slideright())}}),watch:{images:function(e){this.thumbnails=e}},mounted:function(){ue.on(document,"keydown",this.shortcuts)},beforeDestroy:function(){ue.off(document,"keydown",this.shortcuts)}}),At=ut,dt=(a("e1ae"),Object(C["a"])(At,ct,lt,!1,null,"79e1b87d",null));dt.options.__file="image-slider.vue";var pt=dt.exports,ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.selectedShape?a("div",[a("div",{staticClass:"d-flex flex-column"},[a("div",{staticClass:"mb-2 mt-2"},[e._v("\n      Category Name\n      "),a("autocomplete-input",{staticClass:"form-group",attrs:{autocompleteClass:["form-control"],value:e.selectedShape.category,list:e.appCategories},on:{added:e.addCategory,selected:e.addCategory}})],1),a("div",{staticClass:"mb-2 mt-2"},[e._v("\n      Label Name\n      "),a("input",{staticClass:"form-text w-100",attrs:{type:"text",placeholder:"Label the shape, Eg: face, clock .."},domProps:{value:e.selectedShape.label},on:{change:e.updateLabel}})]),a("panel-attribute"),a("panel-tag"),a("panel-feature-point")],1)]):e._e()},ft=[],gt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.selectedShape?a("div",{on:{click:function(t){return t.stopPropagation(),e.forceFocusOut(t)}}},[a("p",{staticClass:"mb-2"},[a("small",[e._v("\n    Feature Points "+e._s(e.featurePoints.length)+"\n    ")])]),a("div",{attrs:{id:"feature-points-list"}},[a("ul",{attrs:{id:"fpoints-list"}},[a("li",{staticClass:"li-fpoints grey-border"},[a("draggable",{model:{value:e.featurePoints,callback:function(t){e.featurePoints=t},expression:"featurePoints"}},e._l(e.featurePoints,function(t){return a("div",{key:t.id,staticClass:"d-flex align-items-center"},[a("input",{ref:t.id,refInFor:!0,staticClass:"form-control",class:{focusInput:e.selectedFeaturePoints.includes(t.id)},staticStyle:{width:"100px"},attrs:{type:"text",placeholder:"Label the feature point"},domProps:{value:t.label},on:{click:function(a){a.stopPropagation(),e.onClick(a,t)},change:function(a){e.setFeaturePointLabel(a,t)},keyup:function(a){if(!("button"in a)&&e._k(a.keyCode,"enter",13,a.key,"Enter"))return null;e.setFeaturePointLabel(a,t)}}}),a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:["far","trash-alt"]},on:{click:function(a){a.stopPropagation(),e.deleteFeaturePoint(t.id)}}})],1)}))],1)])])]):e._e()},mt=[],vt={computed:Object(c["a"])({},Object(l["b"])("action-config",{selectedShape:"getSelectedShape",selectedFeaturePoints:"getSelectedFeaturePoints"}),Object(l["b"])("image-store",{getFeaturePointByID:"getFeaturePointByID",getShapeFeaturePointIDs:"getShapeFeaturePointIDs",getShapeFeaturePoints:"getShapeFeaturePoints"}),{featurePoints:{get:function(){var e=this.selectedShape;return e&&this.getShapeFeaturePoints(e)},set:function(e){var t=this.selectedShape;this.updateFeaturePoints({shapeID:t,featurePoints:e})}}}),methods:Object(c["a"])({},Object(l["c"])("image-store",{updateFeaturePoint:"updateFeaturePoint",updateFeaturePoints:"updateFeaturePoints"}),Object(l["c"])("action-config",{addSelectedElement:"addSelectedElement",setSelectedElements:"setSelectedElements"}),{deleteFeaturePoint:function(e){var t=this.selectedShape,a=de({svg:this.$svg,id:e});a.selectize(!1),a.remove(),this.$store.commit("image-store/detachFeaturePoint",{shapeID:t,featurePointID:e}),this.$store.commit("action-config/removeSelectedElement",{featurePointID:e})},deselectShape:function(){var e=de({svg:this.$svg,id:this.selectedShape});e.selectize(!1)},deselectShapeFeaturePoints:function(){var e=this;this.selectedFeaturePoints.forEach(function(t){var a=de({svg:e.$svg,id:t});a.selectize(!1)}),this.setSelectedElements({shapes:this.selectedShape})},forceFocusOut:function(){this.deselectShapeFeaturePoints();var e=de({svg:this.$svg,id:this.selectedShape});e.selectize({rotationPoint:!1})},onClick:function(e,t){e.ctrlKey||this.deselectShapeFeaturePoints(),this.deselectShape(),this.addSelectedElement({featurePointID:t.id})},setFeaturePointLabel:function(e,t){e.target.value!==t.label&&this.updateFeaturePoint({pointID:t.id,newLabel:e.target.value})}})},bt=vt,yt=(a("7883"),Object(C["a"])(bt,gt,mt,!1,null,"a63dc77e",null));yt.options.__file="panel-feature-point.vue";var St=yt.exports,wt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"wrapper"},[a("div",{staticClass:"tags-header"},[e._v("\n    Tags\n  ")]),a("div",{staticClass:"form-group",on:{click:e.focusInput}},[a("draggable",{model:{value:e.shapeTags,callback:function(t){e.shapeTags=t},expression:"shapeTags"}},e._l(e.shapeTags,function(t){return a("div",{key:t,staticClass:"tags",class:{focused:t===e.selectedTag}},[e._v("\n        "+e._s(t)+"\n        "),a("font-awesome-icon",{staticStyle:{"font-size":"1.5em",padding:"5px"},attrs:{icon:["fas","times"]},on:{click:function(a){e.removeTagByCross(t)}}})],1)})),a("label",{attrs:{for:"tag-input"}},[a("input",{ref:"taginput",attrs:{id:"tag-input",type:"text",name:"tag-input",placeholder:"Enter Tag"},domProps:{value:e.tagText},on:{input:e.onInput,change:e.addTag,keyup:function(t){return"button"in t||!e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete"])?e.removeTagByBackspace(t):null}}})])],1)])},It=[],Dt={data:function(){return{selectedTag:null,tagText:""}},computed:Object(c["a"])({},Object(l["b"])("label-data",{appTags:"getTags"}),Object(l["b"])("action-config",{selectedShapeID:"getSelectedShape"}),Object(l["b"])("image-store",{getShapeByID:"getShapeByID"}),{shapeTags:{get:function(){var e=this.getShapeByID(this.selectedShapeID);return e&&e.tags},set:function(e){this.updateShapeDetail({shapeID:this.selectedShapeID,tags:e})}}}),methods:Object(c["a"])({},Object(l["c"])("image-store",{addTagToShape:"addTagToShape",removeTagFromShape:"removeTagFromShape",updateShapeDetail:"updateShapeDetail"}),Object(l["c"])("label-data",{addTagToApp:"addTag"}),{addTag:function(e){var t=e.target.value,a=this.selectedShapeID;this.addTagToShape({shapeID:a,tag:t}),this.addTagToApp({tag:t}),this.tagText=""},focusInput:function(){var e=this.$refs.taginput;e.focus()},onInput:function(e){this.tagText=e.target.value,this.selectedTag=null},removeTagByCross:function(e){var t=this.selectedShapeID;e&&this.removeTagFromShape({shapeID:t,tag:e})},removeTagByBackspace:function(){if(0===this.tagText.length){if(null!==this.selectedTag){var e=this.selectedShapeID;return this.removeTagFromShape({shapeID:e,tag:this.selectedTag}),this.selectedTag=null,void this.$refs.taginput.focus()}var t=this.shapeTags,a=t.slice(-1)[0];a&&(this.selectedTag=a)}}})},Ct=Dt,Pt=(a("8d6b"),Object(C["a"])(Ct,wt,It,!1,null,"18daf59c",null));Pt.options.__file="panel-tag.vue";var xt=Pt.exports,Ot=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"clearfix"},[e._v("\n    Attributes\n  ")]),e.shapeAttributes.length?a("div",{staticClass:"mb-2",attrs:{id:"attributes-list"}},e._l(e.shapeAttributes,function(t,i){return a("div",{key:i,staticClass:"d-flex align-items-start",staticStyle:{"margin-top":"3px"}},[a("autocomplete-input",{staticClass:"form-text w-40",attrs:{list:e.suggestedProperties,value:t.property,autocompleteClass:["form-control","w-100"]},on:{added:function(a){e.updateAttributeProp(t,a)},selected:function(a){e.updateAttributeProp(t,a)}}}),a("autocomplete-input",{staticClass:"form-text w-60",attrs:{list:e.suggestedValues(t.property),value:t.value,autocompleteClass:["form-control","w-100"]},on:{added:function(a){e.updateAttributeValue(t,a)},selected:function(a){e.updateAttributeValue(t,a)}}}),a("button",{staticClass:"btn",attrs:{type:"button",name:"button"},on:{click:function(t){e.removeAttribute(i)}}},[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:["far","trash-alt"]}})],1)],1)})):e._e(),a("div",{staticClass:"d-flex align-items-start"},[a("autocomplete-input",{staticClass:"form-text w-40",attrs:{value:e.enterProperty,list:e.suggestedProperties,autocompleteClass:["form-control","w-100"]},on:{added:function(t){e.enterProperty=t},selected:function(t){e.enterProperty=t}}}),a("autocomplete-input",{staticClass:"form-text w-60",attrs:{value:e.enterValue,list:e.suggestedValues(e.enterProperty),autocompleteClass:["form-control","w-100"]},on:{added:function(t){e.enterValue=t},selected:function(t){e.enterValue=t}}}),a("button",{staticClass:"btn",attrs:{type:"button",name:"button"},on:{click:e.addAttribute}},[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em"},attrs:{icon:["fas","plus"]}})],1)],1)])},Et=[],_t={data:function(){return{enterProperty:"",enterValue:""}},computed:Object(c["a"])({},Object(l["b"])("label-data",{suggestedProperties:"getProperties",getSuggestedValues:"getValues"}),Object(l["b"])("action-config",{selectedShapeID:"getSelectedShape"}),Object(l["b"])("image-store",{getShapeAttributes:"getShapeAttributes"}),{shapeAttributes:function(){var e=this.selectedShapeID;return e&&this.getShapeAttributes(e)}}),methods:Object(c["a"])({},Object(l["c"])("label-data",{addAttributeToApp:"addAttribute",addPropertyToApp:"addProperty",addValueToApp:"addValue"}),Object(l["c"])("image-store",{addAttributeToShape:"addAttributeToShape",removeAttributeFromShape:"removeAttributeFromShape",updateAttribute:"updateAttribute"}),{addAttribute:function(){this.$nextTick(function(){var e=this.selectedShapeID,t=this.enterProperty,a=this.enterValue;t&&a&&(this.addAttributeToShape({shapeID:e,property:t,value:a}),this.addAttributeToApp({property:t,value:a}),this.enterProperty="",this.enterValue="")})},removeAttribute:function(e){var t=this.selectedShapeID;this.removeAttributeFromShape({shapeID:t,index:e})},suggestedValues:function(e){return this.getSuggestedValues(e)},updateAttributeProp:function(e,t){var a=this.selectedShapeID;this.updateAttribute({shapeID:a,oldProp:e.property,oldValue:e.value,newProp:t,newValue:e.value}),this.addAttributeToApp({property:t,value:e.value})},updateAttributeValue:function(e,t){var a=this.selectedShapeID;this.updateAttribute({shapeID:a,oldProp:e.property,oldValue:e.value,newProp:e.property,newValue:t}),this.addAttributeToApp({property:e.property,value:t})}})},jt=_t,kt=(a("65a8"),Object(C["a"])(jt,Ot,Et,!1,null,"87ef713a",null));kt.options.__file="panel-attribute.vue";var zt=kt.exports,Bt={components:{"panel-feature-point":St,"panel-tag":xt,"panel-attribute":zt},computed:Object(c["a"])({},Object(l["b"])("action-config",{selectedShapeID:"getSelectedShape"}),Object(l["b"])("image-store",{getShapeByID:"getShapeByID"}),Object(l["b"])("label-data",{appCategories:"getCategory"}),{selectedShape:function(){return this.selectedShapeID&&this.getShapeByID(this.selectedShapeID)}}),methods:Object(c["a"])({},Object(l["c"])("image-store",{setShapeCategory:"setShapeCategory",updateShapeDetail:"updateShapeDetail"}),Object(l["c"])("label-data",{addCategoryToApp:"addCategory"}),{addCategory:function(e){this.setShapeCategory({category:e,shapeID:this.selectedShapeID}),this.addCategoryToApp({category:e})},updateLabel:function(e){this.updateShapeDetail({shapeID:this.selectedShapeID,label:e.target.value})}})},Tt=Bt,Ft=(a("90e9"),Object(C["a"])(Tt,ht,ft,!1,null,"58a7cf7a",null));Ft.options.__file="label-panel.vue";var Qt=Ft.exports,Mt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("div",{staticClass:"dropdown"},[a("div",{staticClass:"dropbtn"},[a("font-awesome-icon",{staticStyle:{"font-size":"1.5em",color:"green"},attrs:{icon:["fas","bars"]}})],1),a("div",{staticClass:"dropdown-content"},[a("a",{attrs:{href:"#"}},[a("label",{staticClass:"btn-bs-file"},[e._v("Open\n          "),a("input",{ref:"open",staticClass:"filebutton",attrs:{type:"file",accept:".fpp,.nimn,.xml,.json"},on:{change:e.openFile}})]),a("span",[e._v("Ctrl + i")])]),a("a",{ref:"save",attrs:{href:"#"},on:{click:function(t){e.showModal=!0}}},[a("label",[e._v("Save")]),a("span",[e._v("Ctrl + e")])]),a("a",{attrs:{href:"#"},on:{click:e.openSettings}},[e._v("\n        Settings\n      ")])])]),e.showModal?a("modal-save",{on:{close:function(t){e.showModal=!1}}}):e._e()],1)},Lt=[],$t=(a("aef6"),{name:"image-store",type:"map",detail:[{name:"images",type:"varmap",detail:{type:"map",detail:[{name:"name",type:"string"},{name:"src",type:"string"},{name:"size",type:"map",detail:[{name:"width",type:"number"},{name:"height",type:"number"},{name:"scaledWidth",type:"number"},{name:"scaledHeight",type:"number"},{name:"imageScale",type:"number"}]},{name:"shapes",type:"list",detail:{type:"string"}},{name:"shapeIndex",type:"number"},{name:"featurePointSize",type:"number"},{name:"opacity",type:"number"}]}},{name:"shapes",type:"varmap",detail:{type:"map",detail:[{name:"id",type:"string"},{name:"label",type:"string"},{name:"type",type:"string"},{name:"category",type:"string"},{name:"points",type:"list",detail:{type:"number"}},{name:"rbox",type:"map",detail:[{type:"number",name:"w"},{type:"number",name:"h"},{type:"number",name:"x2"},{type:"number",name:"y2"},{type:"number",name:"cx"},{type:"number",name:"cy"},{type:"number",name:"x"},{type:"number",name:"width"},{type:"number",name:"y"},{type:"number",name:"height"}]},{name:"attributes",type:"list",detail:{type:"map",detail:[{name:"key",type:"string"},{name:"property",type:"string"},{name:"value",type:"string"}]}},{name:"tags",type:"list",detail:{type:"string"}},{name:"featurePoints",type:"list",detail:{type:"string"}},{name:"featurePointIndex",type:"number"},{name:"zoomScale",type:"number"},{name:"defaultZoomScale",type:"number"}]}},{name:"featurePoints",type:"varmap",detail:{type:"map",detail:[{name:"cx",type:"number"},{name:"cy",type:"number"},{name:"id",type:"string"},{name:"label",type:"string"}]}},{name:"imageIndex",type:"number"}]}),Vt={name:"app-config",type:"map",detail:[{name:"autosave",type:"map",detail:[{name:"syncingInterval",type:"number"},{name:"enable",type:"boolean"},{name:"deleteIfExported",type:"boolean"}]},{name:"zoomStepSize",type:"number"},{name:"opacityStepSize",type:"number"},{name:"featurePointColor",type:"string"}]},Nt={name:"label-data",type:"map",detail:[{name:"properties",type:"list",detail:{type:"string"}},{name:"propValues",type:"varmap",detail:{type:"list",detail:{type:"string"}}},{name:"categories",type:"list",detail:{type:"string"}},{name:"tags",type:"list",detail:{type:"string"}}]},Ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transition",{attrs:{name:"modal"}},[e.showSaveDialog?a("modal-select-savetype",{on:{close:function(t){e.$emit("close")},save:function(t){e.setFileType(t)}}}):a("modal-get-filename",{attrs:{value:e.defaultvalues[e.filetype],ext:e.filetype},on:{close:function(t){e.showSaveDialog=!0},input:function(t){e.saveAs(t,e.filetype)}}})],1)},Yt=[],Gt=a("8afe"),Kt=a("9393");function Rt(e){var t=e.getters["image-store/getStoreData"],a=e.getters["app-config/getStoreData"],i=e.getters["label-data/getStoreData"];return{"image-store":t,"app-config":a,"label-data":i}}function Jt(e){var t=e.images,a=e.annotations,i=e.categories,n=i.reduce(function(e,t){return e.push(t.name),e},[]),o={},s={};t.forEach(function(e,t){o[e.file_name]=new L({id:t,name:e.file_name,size:{width:e.width,height:e.height,scaledWidth:e.width,scaledHeight:e.height,imageScale:1}})}),a.forEach(function(e){var a=e.id,i=e.image_id,r=e.category_id,c=e.segmentation,l=e.bbox,u=2===c[0].length?d:p,A=null,h=null,f=Object(Kt["a"])(l,4),g=f[0],m=f[1],v=f[2],b=f[3];if(u===d){var y=Object(Kt["a"])(c[0],2),S=y[0],w=y[1];A=[S,w,b/2],h={cx:S,cy:w,width:v,height:b,w:v,h:b}}else A=Object(Gt["a"])(c[0]),h={x:g,y:m,width:v,height:b,w:v,h:b};var I=new N({id:"".concat(u,"#").concat(i,"-").concat(a),category:n[r],points:A,type:u,rbox:h});s[I.id]=I;var D=t[i].file_name,C=o[D];C.shapes.push(I.id),++C.shapeIndex});var r={"image-store":{images:o,shapes:s},"label-data":{categories:n}};return r}function Ut(e){var t=a("c51a"),i={alwaysChildren:!0,compact:!0,ignoreComment:!0},n=t.xml2js(e,i),o=n.dataset,s=o.images.image;s.constructor!==Array&&(s=[s]);var r={},c={},l={},u=0;s.forEach(function(e){var t=e._attributes.file,a=e.box,i=void 0===a?[]:a,n=new L({name:t,id:u++}),o=[],s=0;i.constructor!==Array&&(i=[i]),i.forEach(function(e){var t=e._attributes,a=t.top,i=t.left,r=t.width,u=t.height,d=e.label._text,p=e.part,f=void 0===p?[]:p,g=s++,m=n.id+"-"+g,v=new N({id:A+"#"+m,label:d||A+"#"+g,type:A,rbox:{x:i,y:a,w:r,h:u},points:[i,a,r,u]}),b=[],y=0;f.constructor!==Array&&(f=[f]),f.forEach(function(e){var t=e._attributes,a=t.x,i=t.y,n=y++,o=m+"-"+n,s=new $({cx:a,cy:i,id:h+"#"+o,label:h+"#"+n});b.push(s.id),l[s.id]=s}),v.featurePointIndex=y,v.featurePoints=b,o.push(v.id),c[v.id]=v}),n.shapeIndex=s,n.shapes=o,r[n.name]=n});var d={images:r,shapes:c,featurePoints:l,imageIndex:u};return d}function Wt(e){var t=a("87f2"),i=Rt(e),n={type:"map",detail:[$t,Vt,Nt]},o=t.buildSchema(n),s=t.stringify(o,i);return s}function Xt(e){var t="\n  <?xml version='1.0' encoding='ISO-8859-1'?>\n  <?xml-stylesheet type='text/xsl' href='image_metadata_stylesheet.xsl'?>\n  <dataset>\n    <name>dlib face detection dataset generated by ImgLab</name>\n\n    <comment>\n      This dataset is manually crafted or adjusted using ImgLab web annotation tool\n      For more details, please go to https://github.com/NaturalIntelligence/imglab\n    </comment>\n\n    <images>\n  ",a=Rt(e),i="",n=a["image-store"],o=n.images,s=n.shapes,r=n.featurePoints;Object.values(o).forEach(function(e){i+="\n      <image file='".concat(e.name,"'>\n    "),e.shapes.forEach(function(e){var t=s[e],a=t.rbox;i+="\n        <box top='".concat(a.y,"' left='").concat(a.x,"' width='").concat(a.w,"' height='").concat(a.h,"'>\n          <label>").concat(s[e].label||s[e].type,"</label>"),t.featurePoints.forEach(function(e){var t=r[e];i+="\n          <part name='".concat(t.id,"' x='").concat(Math.floor(t.cx),"' y='").concat(Math.floor(t.cy),"'/>")}),i+="\n        </box>\n      "}),i+="\n      </image>\n    "});var c="\n    </images>\n  </dataset>";return t+i+c}function Zt(e,t){var a=Rt(e),i=a["image-store"].shapes,n=i[t],o="version: 1\nn_points: ".concat(n.featurePoints.length,"\n{\n"),s=a["image-store"].featurePoints;return n.featurePoints.forEach(function(e){var t=s[e];o+="".concat(Math.floor(t.cx)," ").concat(Math.floor(t.cy),"\n")}),o+="}",o}function qt(e){var t=Rt(e),a=t["image-store"],i=t["label-data"],n=a.images,o=a.shapes,s=i.categories;s.push("uncategorized");var r={images:[],annotations:[],categories:[],type:"instances"},c=0;return Object.values(n).forEach(function(e,t){var a=e.name;r.images.push({file_name:a,height:e.size.height,width:e.size.width,id:t}),e.shapes.forEach(function(e){var a=o[e],i=0,n=[];a.type===p?(n=Object(Gt["a"])(a.points),i=ta(n)):a.type===d?(n=[a.points[0],a.points[1]],i=a.points[2]*a.points[2]*Math.PI):a.type===A?(n=[a.points[0],a.points[1],a.points[0]+a.points[2],a.points[1],a.points[0]+a.points[2],a.points[1]+a.points[3],a.points[0],a.points[1]+a.points[3]],i=ta(n)):console.error("Unknown type");var l=a.category?s.indexOf(a.category):s.length-1,u=a.rbox,h=u.x,f=u.y,g=u.width,m=u.height;r.annotations.push({id:c++,image_id:t,category_id:l,segmentation:[n],area:i,bbox:[h,f,g,m],iscrowd:0,ignore:0})})}),s.forEach(function(e,t){r.categories.push({id:t,name:e,supercategory:"none"})}),JSON.stringify(r)}function ea(e){var t,a,i,n,o,s,r,c,l,u,d=Rt(e),p=d["image-store"],h=p.images,f=p.shapes,g={category:0,x:0,y:0,w:0,h:0},m=["person","bicycle","car","motorcycle","airplane","bus","train","truck","boat","traffic light","fire hydrant","stop sign","parking meter","bench","bird","cat","dog","horse","sheep","cow","elephant","bear","zebra","giraffe","backpack","umbrella","handbag","tie","suitcase","frisbee","skis","snowboard","sports ball","kite","baseball bat","baseball glove","skateboard","surfboard","tennis racket","bottle","wine glass","cup","fork","knife","spoon","bowl","banana","apple","sandwich","orange","broccoli","carrot","hot dog","pizza","donut","cake","chair","couch","potted plant","bed","dining table","toilet","tv","laptop","mouse","remote","keyboard","cell phone","microwave","oven","toaster","sink","refrigerator","book","clock","vase","scissors","teddy bear","hair drier","toothbrush","Mc'Donalds","Mercedes","Apple (Brand)","KFC","Domino's Pizza","Pizza Hut","Hitachi","BMW","Fusionex","Toyota","Proton","Perodua","Honda"];return Object.values(h).forEach(function(e){o=e.size.width,s=e.size.height,e.shapes.forEach(function(e){var d=f[e];d.type==A&&(t=d.points[0],a=d.points[1],i=d.points[0]+d.points[2],n=d.points[1]+d.points[3],r=(t+i)/2/o,c=(a+n)/2/s,l=(i-t)/o,u=(n-a)/s,g={category:m.length,x:r,y:c,w:l,h:u})})}),console.log(Object.values(g).join(" ")),{results:Object.values(g).join(" "),classes:m}}function ta(e){for(var t=0,a=e.length,i=0;i<a;i+=2){var n=(i+2)%a;t+=e[i]*e[n+1]-e[i+1]*e[n]}return Math.abs(t/2)}var aa={NIMN:".nimn",DLIB_XML:".xml",DLIB_PTS:".pts",COCO_JSON:".json",YOLO_V5:".txt"},ia=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",attrs:{role:"document"}},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title"},[e._v("File Name")]),a("button",{staticClass:"btn float-right",attrs:{type:"button",name:"button"},on:{click:function(t){e.$emit("close")}}},[e._v("\n          x\n        ")])]),a("div",{staticClass:"modal-body"},[a("ul",{staticClass:"list-empty-style"},[a("li",{staticClass:"list-item-style"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.validate(e._ext.NIMN)}}},[e._v("\n              Project file\n            ")])]),a("li",{staticClass:"list-item-style"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.validate(e._ext.DLIB_XML)}}},[e._v("\n              Dlib XML\n            ")])]),a("li",{staticClass:"list-item-style"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.validate(e._ext.DLIB_PTS)}}},[e._v("\n              Dlib pts\n            ")])]),a("li",{staticClass:"list-item-style"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.validate(e._ext.COCO_JSON)}}},[e._v("\n              COCO JSON\n            ")])]),e._m(0),a("li",{staticClass:"list-item-style"},[a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(t){e.validate(e._ext.YOLO_V5)}}},[e._v("\n              Yolo v5\n              \n            ")])])])])])])])},na=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{staticClass:"list-item-style"},[a("button",{staticClass:"btn",attrs:{type:"button"}},[e._v("\n              Pascal VOC XML\n            ")])])}],oa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",attrs:{role:"document"}},[a("div",{staticClass:"modal-container"},[e._m(0),a("div",{staticClass:"modal-body"},[a("label",{attrs:{for:"file-name"}},[a("input",{staticClass:"form-control",class:{error:e.showError},attrs:{type:"text",name:"file-name"},domProps:{value:e.filename},on:{input:e.onInput}})])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"button",name:"button","data-dismiss":"modal"},on:{click:function(t){e.$emit("close")}}},[e._v("\n          Cancel\n        ")]),a("button",{staticClass:"btn btn-primary float-right",attrs:{type:"button",name:"button"},on:{click:e.setFilename}},[e._v("\n          Confirm\n        ")])])])])])},sa=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title"},[e._v("File Name")])])}],ra={props:{value:{type:String,required:!0},ext:{type:String,required:!0}},data:function(){return{filename:this.value+this.ext,showError:!1}},methods:{onInput:function(e){e.target.value.length&&(this.showError=!1),this.filename=e.target.value},setFilename:function(){this.validFilename()&&this.filename.length?this.$emit("input",this.filename):this.showError=!0},shortcuts:function(e){"Escape"===e.key&&this.$emit("close")},validFilename:function(){return/^[a-z0-9_.@()-]/i.test(this.filename)&&this.filename.endsWith(this.ext)}},mounted:function(){ue.on(document,"keyup",this.shortcuts)},beforeDestroy:function(){ue.off(document,"keyup",this.shortcuts)}},ca=ra,la=(a("41d4"),Object(C["a"])(ca,oa,sa,!1,null,"15fb87f9",null));la.options.__file="modal-get-filename.vue";var ua=la.exports,Aa={components:{"modal-get-filename":ua},data:function(){return{snackbarMsg:""}},computed:Object(c["a"])({},Object(l["b"])("image-store",{dataImageStore:"getStoreData",imageSelected:"getImageSelected"}),Object(l["b"])("app-config",{dataAppConfig:"getStoreData"}),Object(l["b"])("label-data",{dataLabelData:"getStoreData"}),Object(l["b"])("action-config",{getSelectedShape:"getSelectedShape"}),{_ext:function(){return aa}}),methods:{displaySnackbar:function(e){this.snackbarMsg=e},shortcuts:function(e){"Escape"===e.key&&this.$emit("close")},validate:function(e){switch(e){case aa.DLIB_PTS:var t=this.getSelectedShape;return t?(this.$emit("save",e),!0):void this.displaySnackbar("Please create an image and select a shape to continue");case aa.COCO_JSON:case aa.DLIB_XML:case aa.NIMN:case aa.YOLO_V5:return this.$emit("save",e),!0;default:return!1}}},mounted:function(){ue.on(document,"keyup",this.shortcuts)},beforeDestroy:function(){ue.off(document,"keyup",this.shortcuts)}},da=Aa,pa=(a("0c02"),Object(C["a"])(da,ia,na,!1,null,"66647dde",null));pa.options.__file="modal-select-savetype.vue";var ha=pa.exports,fa=a("21a6"),ga={components:{"modal-select-savetype":ha,"modal-get-filename":ua},data:function(){var e;return{defaultvalues:(e={},Object(u["a"])(e,aa.NIMN,"Untitled_imgLab"),Object(u["a"])(e,aa.DLIB_XML,"_dlib-xml"),Object(u["a"])(e,aa.DLIB_PTS,"_dlib_pts"),Object(u["a"])(e,aa.COCO_JSON,"_coco"),Object(u["a"])(e,aa.YOLO_V5,"_yolov5"),e),filetype:null,showSaveDialog:!0}},computed:Object(c["a"])({},Object(l["b"])("action-config",{selectedShapeID:"getSelectedShape"})),methods:{analyticsReport:function(e){this.analyticsFileType(e),this.analyticsImageStore(),this.analyticsLabelData()},analyticsImageStore:function(){var e=Rt(this.$store),t=e["image-store"];this.$ga.event({eventCategory:"image - count",eventAction:"save",eventLabel:"".concat(Object.keys(t.images).length," images")}),this.$ga.event({eventCategory:"shape - count",eventAction:"save",eventLabel:"".concat(Object.keys(t.shapes).length," shapes")}),this.$ga.event({eventCategory:"points - count",eventAction:"save",eventLabel:"".concat(Object.keys(t.featurePoints).length," feature points")})},analyticsLabelData:function(){var e=this,t=Rt(this.$store),a=t["label-data"];a.categories.forEach(function(t){e.$ga.event({eventCategory:"category",eventAction:"save",eventLabel:t})})},analyticsFileType:function(e){this.$ga.event({eventCategory:"filetype",eventAction:"save",eventLabel:e})},download:function(e,t,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"utf-8",n=new Blob([e],{type:a+";charset="+i});fa.saveAs(n,t)},isSupported:function(e){return Object.values(aa).includes(e)},saveAs:function(e,t){if(this.filetype=null,this.showSaveDialog=!0,this.isSupported(t))switch(this.analyticsReport(t),t){case aa.NIMN:this.saveAsNimn(e);break;case aa.DLIB_XML:this.saveAsDlibXml(e);break;case aa.DLIB_PTS:this.saveAsDlibPts(e);break;case aa.COCO_JSON:this.saveAsCocoJSON(e);break;case aa.YOLO_V5:this.saveAsYolo(e);break;default:console.error("Unknown error, shouldn't reach here")}else console.error("".concat(t," not supported"))},saveAsCocoJSON:function(e){var t=qt(this.$store);this.download(t,e,"application/json")},saveAsDlibPts:function(e){var t=Zt(this.$store,this.selectedShapeID);this.download(t,e,"text/plain")},saveAsDlibXml:function(e){var t=Xt(this.$store);this.download(t,"Downloads/Honda/".concat(e),"text/xml")},saveAsNimn:function(e){var t=Wt(this.$store);this.download(t,e,"application/nimn")},saveAsYolo:function(e){var t=ea(this.$store),a=t.results;this.download(a,"".concat(e),"text/plain")},setFileType:function(e){this.filetype=e,this.showSaveDialog=!1}}},ma=ga,va=(a("ba80"),Object(C["a"])(ma,Ht,Yt,!1,null,"bbe00512",null));va.options.__file="modal-save.vue";var ba=va.exports,ya={components:{"modal-save":ba},data:function(){return{showModal:!1}},methods:Object(c["a"])({},Object(l["c"])("app-config",{initAppConfig:"init"}),Object(l["c"])("image-store",{initImageStore:"init"}),Object(l["c"])("label-data",{initLabelData:"init"}),{loadDlibXml:function(e){var t=Ut(e);this.initImageStore(t)},loadJSONFile:function(e){var t=Jt(JSON.parse(e));this.initImageStore(t["image-store"]),this.initLabelData(t["label-data"])},loadProjectFile:function(e){var t=a("87f2"),i={type:"map",detail:[$t,Vt,Nt]},n=t.buildSchema(i),o=t.parse(n,e);this.initAppConfig(o["app-config"]),this.initImageStore(o["image-store"]),this.initLabelData(o["label-data"])},openSettings:function(){console.log("openSettings")},openFile:function(e){var t=this,a=e.srcElement;if(a.files&&a.files[0]){var i=a.files[0],n=new FileReader;n.onload=function(e){i.name.endsWith(".json")?t.loadJSONFile(e.target.result):i.name.endsWith(aa.NIMN)?t.loadProjectFile(e.target.result):i.name.endsWith(".fpp")?t.loadFpp(e.target.result):i.name.endsWith(".xml")?t.loadDlibXml(e.target.result):console.log("Not supported")},n.readAsText(a.files[0])}a.value=null},shortcuts:function(e){"I"!==e.key&&"i"!==e.key||e.shiftKey||e.altKey||!e.ctrlKey?"E"!==e.key&&"e"!==e.key||e.shiftKey||e.altKey||!e.ctrlKey||(this.$refs.save.click(),e.preventDefault(),e.stopPropagation()):(this.$refs.open.click(),e.preventDefault(),e.stopPropagation())}}),mounted:function(){ue.on(document,"keydown",this.shortcuts)},beforeDestroy:function(){ue.off(document,"keydown",this.shortcuts)}},Sa=ya,wa=(a("86da"),Object(C["a"])(Sa,Mt,Lt,!1,null,"48320780",null));wa.options.__file="menu.vue";var Ia=wa.exports,Da=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("small",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}]},[e._v("\n    "+e._s(e.x)+", "+e._s(e.y)+"\n  ")])])},Ca=[],Pa={data:function(){return{x:0,y:0,show:!1}},methods:{hideMousePosition:function(){this.show=!1,this.x=0,this.y=0},updateMousePosition:function(e,t){this.show=!0,this.x=e,this.y=t}},mounted:function(){tt.$on("mouse-move",this.updateMousePosition),tt.$on("mouse-leave",this.hideMousePosition)},beforeDestroy:function(){tt.$off("mouse-move",this.updateMousePosition),tt.$off("mouse-leave",this.hideMousePosition)}},xa=Pa,Oa=(a("c6e8"),Object(C["a"])(xa,Da,Ca,!1,null,null,null));Oa.options.__file="mouse-coordinates.vue";var Ea=Oa.exports,_a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.show?a("transition",{attrs:{name:"modal"}},[a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper",attrs:{role:"document"}},[a("div",{staticClass:"modal-container"},[a("div",{staticClass:"modal-header"},[a("h3",{staticClass:"modal-title"},[e._v("Recovery")])]),a("div",{staticClass:"modal-body"},[e._v("\n          You've previously saved data. Would you like to restore it?\n        ")]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-secondary float-right",attrs:{type:"button",name:"button","data-dismiss":"modal"},on:{click:e.clearCache}},[e._v("\n            No\n          ")]),a("button",{staticClass:"btn btn-primary float-right",attrs:{type:"button",name:"button"},on:{click:e.restoreData}},[e._v("\n            Yes\n          ")])])])])])]):e._e()},ja=[],ka={data:function(){return{show:!1,storeData:null}},computed:Object(c["a"])({},Object(l["b"])({localStoreData:"getLocalStoreData"})),methods:{checkBrowserCache:function(){var e=this.localStoreData;e&&(this.show=!0,this.storeData=e)},clearCache:function(){this.show=!1,localStorage.clear()},restoreData:function(){this.show=!1,this.$store.commit("initializeStore",{storeData:this.storeData})}},mounted:function(){this.checkBrowserCache()}},za=ka,Ba=(a("20cc"),Object(C["a"])(za,_a,ja,!1,null,"0d5de786",null));Ba.options.__file="restore-data.vue";var Ta=Ba.exports,Fa={components:{workarea:rt,"image-slider":pt,toolbox:We,actionbar:ke,"label-panel":Qt,"app-menu":Ia,"prompt-restore":Ta,"mouse-coord":Ea},data:function(){return{LABEL_TAG:v,CANVAS_TAG:b}}},Qa=Fa,Ma=(a("034f"),Object(C["a"])(Qa,n,o,!1,null,null,null));Ma.options.__file="App.vue";var La=Ma.exports,$a=a("1929");a("bf0f"),a("8af2"),a("191d"),a("80d0");var Va={install:function(e){e.prototype.$svg=$a}},Na=a("1516"),Ha=a.n(Na),Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("input",{ref:"input",class:e.autocompleteClass,attrs:{type:"text",placeholer:e.placeholder},domProps:{value:e.text},on:{blur:e.onInputBlur,click:function(t){e.showSuggestions=!0},input:e.onInput,keydown:[function(t){if(!("button"in t)&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"]))return null;t.stopPropagation(),e.moveSelection(-1)},function(t){if(!("button"in t)&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"]))return null;t.stopPropagation(),e.moveSelection(1)},function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.selectSuggestion(t):null},function(t){return"button"in t||!e._k(t.keyCode,"esc",27,t.key,"Escape")?e.resetState(t):null}]}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.showSuggestions&&e.suggestions.length,expression:"showSuggestions && suggestions.length"}],ref:"suggestions",staticClass:"list-style",class:e.autocompleteClass,attrs:{tabindex:"-1"},on:{mouseleave:function(t){e.selected=-1}}},e._l(e.suggestions,function(t,i){return a("li",{key:i,staticClass:"list-item-style",class:{focused:i===e.selected},on:{click:e.selectSuggestion,mouseenter:function(t){e.selected=i}}},[a("div",[e._v("\n        "+e._s(t)+"\n      ")])])}))])},Ga=[],Ka=a("f7fe"),Ra={props:{autocompleteClass:Array,filter:{type:Boolean,default:!0},list:{type:Array,default:function(){return[]}},placeholder:{type:String,default:""},value:{type:String,default:""}},data:function(){return{text:this.value,selected:-1,showSuggestions:!1}},computed:{suggestions:function(){var e=this;return this.filter?this.list.filter(function(t){return t.includes(e.text)}):this.list},debouncedEmitAddEvent:function(){return Ka(this.emitAddEvent,2e3)}},methods:{emitAddEvent:function(e){this.$emit("added",e)},isValid:function(e){return e>=-1&&e<this.suggestions.length},moveSelection:function(e){this.showSuggestions=!0;var t=this.selected+e;this.isValid(t)&&(this.selected=t)},onInput:function(e){var t=e.target.value;e.target.value.length?this.showSuggestions=!0:this.showSuggestions=!1,this.text=t,this.debouncedEmitAddEvent(t)},onInputBlur:function(e){this.$el.contains(e.relatedTarget)||(this.resetState(),this.debouncedEmitAddEvent.flush())},resetState:function(){this.selected=-1,this.showSuggestions=!1},selectSuggestion:function(e){e.preventDefault();var t=this.selected;if(this.isValid(t)){if(-1===t)return this.debouncedEmitAddEvent.flush(),void this.resetState();this.debouncedEmitAddEvent.cancel();var a=this.suggestions[t];this.text=a,this.$emit("selected",a),this.resetState(),this.$refs.input.focus()}}},watch:{value:function(e){this.text=e}}},Ja=Ra,Ua=(a("fc9f"),Object(C["a"])(Ja,Ya,Ga,!1,null,"7c291627",null));Ua.options.__file="autocomplete-input.vue";var Wa=Ua.exports,Xa=a("0284"),Za=a.n(Xa),qa=a("ecee"),ei=a("c074"),ti=a("b702"),ai=a("7a55");a("ab8b");i["a"].use(Za.a,{id:"UA-119603824-1"}),i["a"].use(Va),qa["library"].add(ei["a"],ei["b"],ei["c"],ei["d"],ei["e"],ei["g"],ei["f"],ei["h"],ei["i"],ti["a"],ti["b"],ti["c"],ti["d"]),i["a"].component("autocomplete-input",Wa),i["a"].component("draggable",Ha.a),i["a"].component("font-awesome-icon",ai["FontAwesomeIcon"]),i["a"].config.productionTip=!1,new i["a"]({store:oe,render:function(e){return e(La)}}).$mount("#app")},"617a":function(e,t,a){e.exports=a.p+"img/zoomin.5e450543.svg"},"626c":function(e,t,a){"use strict";var i=a("b291"),n=a.n(i);n.a},"649e":function(e,t,a){e.exports=a.p+"img/keyboard.522f06fa.svg"},"65a8":function(e,t,a){"use strict";var i=a("14a8"),n=a.n(i);n.a},"65b0":function(e,t,a){},"67f7":function(e,t,a){var i={"./circle.svg":"b289","./clock.svg":"755b","./files-white.png":"5313","./keyboard.svg":"649e","./menu.svg":"d17f","./move.svg":"d8c1","./open.png":"8aed","./point.svg":"7c2f","./polygon.svg":"baf3","./rectangle.svg":"3bba","./zoomin.svg":"617a","./zoomout.svg":"bdd3"};function n(e){var t=o(e);return a(t)}function o(e){var t=i[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}n.keys=function(){return Object.keys(i)},n.resolve=o,e.exports=n,n.id="67f7"},"6fe1":function(e,t,a){"use strict";var i=a("eba6"),n=a.n(i);n.a},"755b":function(e,t,a){e.exports=a.p+"img/clock.a4b3e481.svg"},7883:function(e,t,a){"use strict";var i=a("d4d1"),n=a.n(i);n.a},"7c2f":function(e,t,a){e.exports=a.p+"img/point.c6ccc5d8.svg"},8160:function(e,t,a){},"864f":function(e,t,a){},"86da":function(e,t,a){"use strict";var i=a("311b"),n=a.n(i);n.a},"8aed":function(e,t,a){e.exports=a.p+"img/open.de47886f.png"},"8d6b":function(e,t,a){"use strict";var i=a("52b5"),n=a.n(i);n.a},"8d82":function(e,t,a){},"90e9":function(e,t,a){"use strict";var i=a("65b0"),n=a.n(i);n.a},b289:function(e,t,a){e.exports=a.p+"img/circle.81dee732.svg"},b291:function(e,t,a){},ba80:function(e,t,a){"use strict";var i=a("3ae0"),n=a.n(i);n.a},baf3:function(e,t,a){e.exports=a.p+"img/polygon.61a229aa.svg"},bdd3:function(e,t,a){e.exports=a.p+"img/zoomout.2e82184a.svg"},c21b:function(e,t,a){},c6e8:function(e,t,a){"use strict";var i=a("05ce"),n=a.n(i);n.a},c962:function(e,t,a){},d17f:function(e,t,a){e.exports=a.p+"img/menu.8263c531.svg"},d4d1:function(e,t,a){},d8c1:function(e,t,a){e.exports=a.p+"img/move.bf5d09d8.svg"},ddc1:function(e,t,a){"use strict";var i=a("06f0"),n=a.n(i);n.a},e1ae:function(e,t,a){"use strict";var i=a("c962"),n=a.n(i);n.a},e89f:function(e,t,a){},eba6:function(e,t,a){},fc9f:function(e,t,a){"use strict";var i=a("8d82"),n=a.n(i);n.a}});
//# sourceMappingURL=app.826130a2.js.map